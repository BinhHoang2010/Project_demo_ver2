<?php
   
   $messages = [
    "offerStatus" =>  4104,
    "offerLeft" =>  -24,
    "subjects" =>  [
        "3点要約\r",
        "3点要約\r",
        "3点要約"
    ],
    "specialSelectionTags" =>  [
        "ES提出不要",
        "限定座談会"
    ],
    "scaleMatches" =>  [],
    "placeMatches" =>  [],
    "birthplaceMatches" =>  [],
    "messages" =>  [
        [
            "messageId" =>  217180,
            "ownerType" =>  "cUser",
            "owner" =>  "C0210013",
            "destination" =>  "N2125699",
            "message" =>  "あいさつ・自己紹介\r\n\n一言ハイライト\r\n\nオファー本文",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => true,
            "mailtype" => "offer",
            "editedAt" => null,
            "messageRegist" => "2022/05/06 14:14",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "https://www.youtube.com/embed/SXWI_FGGf5g",
            "event" => []
        ],
        [
            "messageId" => 217183,
            "ownerType" => "nUser",
            "owner" => "N2125699",
            "destination" => "C0210013",
            "message" => "以下でオファー受諾しました。\n[まずは話を聞いてみたい]",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => false,
            "mailtype" => "reply",
            "editedAt" => null,
            "messageRegist" => "2022/05/06 15:06",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "",
            "event" => []
        ],
        [
            "messageId" => 217184,
            "ownerType" => "nUser",
            "owner" => "N2125699",
            "destination" => "C0210013",
            "message" => "はじめましてfefのテスト テストと申します\nこの度はオファーいただき大変うれしく思います。\n\n貴社の●●●●●●や▲▲▲▲▲▲の部分に興味を持ちました。\n\n▼▼▼▼▼【要編集 start】▼▼▼▼▼\nあなたの専攻や学びについてメッセージを添えましょう\n\n例）私はこれまで ■■■■■■■の分野について研究（勉強）してきました。\nそのため貴社の事業や仕事内容に関連性があると感じております。\n▲▲▲▲▲【要編集 end】▲▲▲▲▲\n\nよろしくお願いいたします。",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => false,
            "mailtype" => "reply",
            "editedAt" => null,
            "messageRegist" => "2022/05/06 15:06",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "",
            "event" => []
        ],
        [
            "messageId" => 217185,
            "ownerType" => "cUser",
            "owner" => "C0210013",
            "destination" => "N2125699",
            "message" => "fef\r\n受諾 後",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => true,
            "mailtype" => "scout",
            "editedAt" => null,
            "messageRegist" => "2022/05/06 15:06",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "https://youtube.com/embed/SXWI_FGGf5g",
            "event" => [
                [
                    "eventId" => 951,
                    "eventTitle" => "新規",
                    "maxDeadlineDate" => "2022年07月30日(土)",
                    "eventTimetable" => [
                        [
                            "startTime" => "2022年02月28日(月) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年02月27日(日)",
                            "status" => "end"
                        ],
                        [
                            "startTime" => "2022年03月31日(木) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年03月30日(水)",
                            "status" => "end"
                        ],
                        [
                            "startTime" => "2022年04月30日(土) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年04月29日(金)",
                            "status" => "end"
                        ],
                        [
                            "startTime" => "2022年05月31日(火) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年05月30日(月)",
                            "status" => "end"
                        ],
                        [
                            "startTime" => "2022年06月30日(木) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年06月29日(水)",
                            "status" => "accepting"
                        ],
                        [
                            "startTime" => "2022年07月31日(日) 11:00",
                            "endTime" => "12:00",
                            "deadlineDate" => "2022年07月30日(土)",
                            "status" => "accepting"
                        ]
                    ]
                ]
            ]
        ],
        [
            "messageId" => 217186,
            "ownerType" => "cUser",
            "owner" => "C0210013",
            "destination" => "N2125699",
            "message" => "2/24テスト\r\nfef",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => true,
            "mailtype" => "scout",
            "editedAt" => null,
            "messageRegist" => "2022/05/06 15:11",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "",
            "event" => []
        ],
        [
            "messageId" => 218249,
            "ownerType" => "cUser",
            "owner" => "C0210013",
            "destination" => "N2125699",
            "message" => "受諾後件名なしテスト",
            "accountId" => 20,
            "messageCuserPhoto" => "https://cdn.tekkatsu.com/profile/cuser/210013/20/20210813T092732-c0.png",
            "messageNuserPhoto" => "",
            "readFlg" => true,
            "mailtype" => "scout",
            "editedAt" => null,
            "messageRegist" => "2022/05/12 10:56",
            "files" => [],
            "messageTitle" => null,
            "messageYoutubeUrl" => "https://youtube.com/embed/SXWI_FGGf5g",
            "event" => []
        ]
      ]
    ];
    // print_r($messages);

  //  Đẩy hết message vào 1 mảng riêng. Tách riêng 2 mảng theo type => nuser và cuser; trong mảng bao gồm stt của message (key) và value (message)

$mess_array= $messages["messages"];

echo "<pre>";
print_r ($mess_array);
echo "</pre>" . "</br>";

// die();

$nuser_message =  [];
$cuser_message =  [];

// for($i=0; $i<count($mess_array); $i++){
//   if($mess_array[$i]['ownerType'] == "nUser" ){
//     $nuser_message[] = $mess_array[$i]['message'];
//   }elseIf($mess_array[$i]['ownerType'] == "cUser"){
//     $cuser_message[] = $mess_array[$i]['message'];
//   }
// }

foreach($mess_array as $key => $value){
  if($value['ownerType'] == "nUser" ){
    //  $nuser_message[] = $value['message'];
     echo "STT và message của nuser là: " . $key . " và " . $value['message'] . "</br>";
   }elseIf($value['ownerType'] == "cUser"){
    //  $cuser_message[] = $value['message'];
     echo "STT và message của cuser là: " . $key . " và " . $value['message'] . "</br>". "</br>" ;
   }
 }

// foreach ($nuser_message as $key => $value){
//   echo "STT và message của nuser là: " . $key . " và " . $value . "</br>";
// }

// foreach ($cuser_message as $key => $value){
//   echo "STT và message của cuser là: " . $key . " và " . $value . "</br>" ;
// }

$members = [
  "Tung" => 1994,
  "Binh" => 1997,
  "Ly" => 1995,
  "Thao" => 1998,
  "Viet" => 2000,
  "Duy" => 1992,
  "Quynh" => 1990
];

// $mem_key = [];
// $mem_value = [];

// foreach($members as $key => $value){
//   $mem_key[] = $key;
//   $mem_value[] = $value;
// }

// print_r($mem_key) ;  echo "</br>";
// print_r($mem_value); echo "</br>";

$reverse_members = [];
foreach($members as $key => $value){
  $reverse_members[$value]= $key; 
}

echo "<pre>"   ;
print_r($reverse_members);
echo "</pre>"   ;

?>

<!-- Tạo 1 mảng tuần tự về tên thành viên . Đảo ngược và in ra giá trị trong mảng -->

<?php
  $TOC_members = ['Tung', 'Binh', 'Ly', 'Duy', 'Quynh', 'Viet'];

  $new_member = [];
  for($i=count($TOC_members)-1; $i>=0; $i--){
    $new_member[] = $TOC_members[$i];
  }

  echo "<pre>";
  print_r($new_member);
  echo "</pre>";

?>